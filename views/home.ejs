<%- include('partials/header') %>

<div class="home-container">
  <div class="home-hero">
    <div class="home-hero-icon">&#128193;</div>
    <h1>Bienvenue sur Atlas</h1>
    <p class="subtitle">Gérez et partagez vos documents en toute sécurité, sans compte.</p>
  </div>

  <div class="home-actions" data-home-tabs>
    <div class="home-tabs" role="tablist" aria-label="Actions d'accueil">
      <button
        type="button"
        class="home-tab is-active"
        id="home-tab-create"
        role="tab"
        aria-selected="true"
        aria-controls="home-panel-create"
        data-tab-target="home-panel-create"
        tabindex="0"
      >
        Créer un espace
      </button>
      <button
        type="button"
        class="home-tab"
        id="home-tab-access"
        role="tab"
        aria-selected="false"
        aria-controls="home-panel-access"
        data-tab-target="home-panel-access"
        tabindex="-1"
      >
        Entrer un secret
      </button>
    </div>

    <div class="action-card home-panel is-active" id="home-panel-create" role="tabpanel" aria-labelledby="home-tab-create">
      <div class="action-card-head">
        <div class="action-card-icon create">&#10010;</div>
        <h2>Créer un espace</h2>
      </div>
      <p>Créez un nouvel espace de travail pour organiser vos documents.</p>
      <form id="create-workspace-form">
        <input
          type="text"
          name="name"
          id="workspace-name"
          placeholder="Nom de l'espace"
          required
          class="input-field"
          maxlength="100"
        >
        <button type="submit" class="btn btn-primary btn-block">Créer un espace</button>
      </form>
    </div>

    <div class="action-card home-panel" id="home-panel-access" role="tabpanel" aria-labelledby="home-tab-access" hidden>
      <div class="action-card-head">
        <div class="action-card-icon access">&#128272;</div>
        <h2>Entrer un secret</h2>
      </div>
      <p>Accédez à un espace ou un document avec votre secret.</p>
      <form id="access-form">
        <div class="secret-input-group">
          <input
            type="password"
            name="secret"
            id="access-secret"
            placeholder="Collez votre secret ici"
            required
            class="input-field"
          >
          <button type="button" class="btn btn-icon" id="toggle-secret" title="Afficher/Masquer">
            &#128065;
          </button>
          <button type="button" class="btn btn-icon" id="paste-secret" title="Coller">
            &#128203;
          </button>
        </div>
        <button type="submit" class="btn btn-secondary btn-block">Accéder</button>
      </form>
    </div>
  </div>

  <!-- Modal for owner secret display -->
  <div id="secret-modal" class="modal hidden">
    <div class="modal-content">
      <h2>Espace créé avec succès</h2>
      <div class="alert alert-warning">
        Copiez ce secret maintenant. Il ne pourra plus être affiché ensuite.
      </div>
      <div class="secret-display">
        <code id="owner-secret-display"></code>
        <button type="button" class="btn btn-primary" id="copy-secret">Copier</button>
      </div>
      <p class="text-muted" id="copy-feedback"></p>
      <button type="button" class="btn btn-secondary btn-block" id="close-modal">
        J'ai copié mon secret, accéder à l'espace
      </button>
    </div>
  </div>
</div>

<%- include('partials/footer') %>
